---
import { getCollection } from 'astro:content';

import FormattedDate from '~/components/FormattedDate.astro';
import { getPostPath } from '~/lib/posts';

const { limit = 9, offset = 0 } = Astro.props;
const posts = (await getCollection('blog'))
	.sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf())
	.slice(offset, limit);
---

<ul class="grid gap-4 sm:grid-cols-2 md:grid-cols-3">
	{
		posts.map((post) => (
			<li>
				<a href={getPostPath(post)}>
					<h4 class="font-thin text-3xl mb-4">{post.data.title}</h4>
					<img
						alt=""
						height={360}
						src={post.data.heroImage}
						width={720}
					/>
					<p class="mt-4">
						<FormattedDate date={post.data.pubDate} />
					</p>
				</a>
			</li>
		))
	}
</ul>
